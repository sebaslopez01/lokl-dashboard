import { useState, useEffect } from "react";
import { Image, Text, View, Pressable } from "react-native";
import Svg, { Circle, G, Path, Defs, ClipPath, Rect } from "react-native-svg";

const logoSource = require("../assets/logo.png");
const userSource = require("../assets/user.png");

export default function Header() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);

  const fetchData = async () => {
    const res = await fetch(
      "https://randommer.io/api/Name?quantity=1&nameType=fullname",
      {
        headers: {
          "X-Api-Key": "dde86bb3b52242ed9b8b54eab87a7b86",
        },
      }
    );

    const data = await res.json();

    setData(data[0]);
    setLoading(false);
  };

  useEffect(() => {
    fetchData();
  }, []);

  return (
    <View className="bg-black mt-10">
      <View className="flex flex-row items-center justify-center space-x-20 py-5">
        <Svg
          width="24"
          height="32"
          viewBox="0 0 24 32"
          fill="none"
          xmlns="http://www.w3.org/2000/Svg"
        >
          <Circle cx="5.4" cy="9.4" r="2.4" fill="white" />
          <Circle cx="5.4" cy="22.6" r="2.4" fill="white" />
          <Circle cx="18.6" cy="9.4" r="2.4" fill="white" />
          <Circle cx="18.6" cy="22.6" r="2.4" fill="white" />
        </Svg>
        <Image source={logoSource} />
        <Image source={userSource} />
      </View>
      <View className="py-8 mx-10">
        <View className="flex flex-col">
          <Text className="text-white">Dashboard</Text>
          <View className="flex flex-row items-center space-x-2">
            {loading ? (
              <Text className="text-white">Cargando...</Text>
            ) : (
              <Text className="text-white font-bold text-xl">{data}</Text>
            )}
            <Svg
              width="17"
              height="17"
              viewBox="0 0 17 17"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <G clipPath="url(#clip0_1_51)">
                <Path
                  d="M13.2983 15.7124L12.2252 15.5036C11.9898 15.4579 11.7532 15.4189 11.52 15.3626C11.3824 15.3304 11.3007 15.3685 11.2236 15.4896C10.9252 15.949 10.6073 16.4 10.3097 16.8624C10.2119 17.0144 10.1404 17.0457 9.98163 16.9322C9.56297 16.6329 9.1261 16.3585 8.70617 16.0608C8.55208 15.952 8.43694 15.9651 8.29005 16.068C7.88028 16.3555 7.45569 16.6227 7.04846 16.9149C6.87913 17.0368 6.79193 17.0097 6.68356 16.8399C6.39062 16.3822 6.07779 15.938 5.78147 15.4824C5.704 15.3635 5.62526 15.33 5.48514 15.3596C4.96065 15.4697 4.43362 15.5671 3.90744 15.6692C3.63778 15.7212 3.63524 15.7212 3.58106 15.4447C3.48878 14.9739 3.39141 14.5039 3.3131 14.0309C3.28008 13.8307 3.20642 13.7269 2.99053 13.6922C2.51684 13.6177 2.04823 13.5144 1.57792 13.4204C1.27863 13.3607 1.27906 13.359 1.33959 13.0507C1.43949 12.5456 1.53305 12.0387 1.64184 11.5357C1.67571 11.3786 1.63507 11.2884 1.50384 11.2021C1.06189 10.9116 0.625877 10.6114 0.187743 10.315C-0.0497381 10.1545 -0.0476219 10.1558 0.119165 9.91019C0.408291 9.4838 0.691068 9.05318 0.985274 8.63061C1.05893 8.52475 1.05258 8.44896 0.985274 8.34818C0.685565 7.91206 0.398979 7.46704 0.0937667 7.03557C-0.0158727 6.8806 -0.0154495 6.79549 0.153878 6.68752C0.605558 6.39875 1.04285 6.08753 1.49199 5.79537C1.63845 5.7001 1.67952 5.59678 1.64269 5.4253C1.52966 4.9011 1.43907 4.37224 1.32774 3.84805C1.29218 3.67868 1.32774 3.60924 1.50511 3.57833C2.01944 3.48983 2.52911 3.37593 3.04302 3.28617C3.20981 3.25695 3.27881 3.18243 3.30802 3.01856C3.39861 2.50495 3.51291 1.99515 3.60011 1.48069C3.63186 1.29523 3.70975 1.27237 3.87273 1.30666C4.38325 1.41464 4.89927 1.4989 5.40725 1.61576C5.6151 1.66319 5.73363 1.60856 5.84454 1.43666C6.12308 1.00349 6.42449 0.585151 6.69753 0.148603C6.81098 -0.0326224 6.89945 -0.0317751 7.06116 0.0829725C7.47516 0.376828 7.90314 0.651629 8.3201 0.94125C8.45218 1.03313 8.55589 1.04584 8.69728 0.945908C9.12398 0.645701 9.56551 0.366242 9.9939 0.0681525C10.1344 -0.0300816 10.2111 -0.0283878 10.3097 0.124468C10.6039 0.580917 10.9201 1.02297 11.2148 1.47942C11.3125 1.63101 11.4188 1.66022 11.586 1.62508C12.1105 1.51414 12.6388 1.42311 13.1633 1.31302C13.3352 1.27702 13.4012 1.32614 13.4317 1.4972C13.5223 2.01124 13.6361 2.52104 13.7233 3.0355C13.7508 3.19936 13.827 3.26076 13.9773 3.28955C14.4904 3.38525 15.0005 3.49534 15.5144 3.58595C15.6888 3.61686 15.7328 3.68418 15.6956 3.85736C15.5821 4.38833 15.4907 4.92396 15.3751 5.45451C15.3408 5.6133 15.381 5.7001 15.5119 5.78605C15.9656 6.08499 16.4063 6.40298 16.8639 6.69514C17.0366 6.80566 17.0333 6.89246 16.927 7.04447C16.6455 7.44248 16.386 7.8532 16.102 8.24995C15.9783 8.42355 15.9648 8.55947 16.0952 8.74112C16.3873 9.14761 16.6514 9.57399 16.9384 9.98429C17.0409 10.1308 17.0167 10.2049 16.8715 10.2997C16.4106 10.5995 15.9627 10.9184 15.5017 11.219C15.3654 11.3079 15.3396 11.3998 15.3722 11.5535C15.4852 12.0845 15.5762 12.6201 15.6892 13.1515C15.7235 13.3132 15.6863 13.3806 15.522 13.4106C15.009 13.5046 14.4989 13.6156 13.9854 13.707C13.8224 13.7362 13.7453 13.8044 13.7157 13.9725C13.6255 14.4865 13.5214 14.998 13.4135 15.5087C13.3974 15.587 13.3326 15.6539 13.2983 15.7124ZM4.97843 8.81056C5.07495 8.91684 5.11982 8.97062 5.16892 9.01973C6.00032 9.85557 6.83595 10.6863 7.66142 11.5268C7.80112 11.6691 7.90441 11.6941 8.03563 11.5391C8.06273 11.5069 8.09786 11.4819 8.12792 11.4544C8.98217 10.5937 9.83629 9.73391 10.6903 8.87492C11.3511 8.211 12.0106 7.54707 12.6765 6.88865C12.7933 6.77305 12.8035 6.69472 12.6765 6.57997C12.4542 6.37376 12.2362 6.16163 12.0334 5.93679C11.9065 5.79367 11.8218 5.80977 11.6948 5.93976C10.4786 7.16599 9.2531 8.3846 8.0369 9.61252C7.89636 9.75395 7.81678 9.773 7.66904 9.61972C7.15005 9.08113 6.6154 8.55947 6.0871 8.03062C6.02149 7.96499 5.96011 7.8875 5.85978 7.98446C5.57362 8.25588 5.28491 8.52475 4.97843 8.81226V8.81056Z"
                  fill="#6DECB9"
                />
                <Path
                  d="M4.97839 8.81186C5.28487 8.52435 5.57358 8.25548 5.85974 7.98406C5.96218 7.8871 6.02145 7.96458 6.08706 8.03022C6.61536 8.55907 7.15001 9.08073 7.669 9.61932C7.81673 9.7726 7.89632 9.75355 8.03686 9.61213C9.25305 8.3842 10.4785 7.16558 11.6964 5.93935C11.8234 5.81232 11.9081 5.79327 12.0351 5.93639C12.2379 6.16122 12.4559 6.37336 12.6781 6.57957C12.8017 6.69431 12.7932 6.77265 12.6781 6.88824C12.0105 7.54667 11.351 8.21059 10.6902 8.87452C9.83539 9.73294 8.98128 10.5921 8.12787 11.4519C8.09782 11.4815 8.06268 11.5065 8.03559 11.5366C7.90436 11.6916 7.80107 11.6666 7.66138 11.5243C6.83591 10.6859 6.00028 9.85517 5.16804 9.02103C5.11978 8.97191 5.07491 8.91813 4.97839 8.81186Z"
                  fill="white"
                />
              </G>
              <Defs>
                <ClipPath id="clip0_1_51">
                  <Rect width="17" height="17" fill="white" />
                </ClipPath>
              </Defs>
            </Svg>
            <Pressable>
              <Svg
                width="15"
                height="7.5"
                viewBox="0 0 10 5"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <Path
                  d="M1.01306 1L4.93141 3.95635L8.8759 1.02369"
                  stroke="#D1D1D1"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </Svg>
            </Pressable>
          </View>
          <View className="flex flex-row items-center space-x-2">
            <Text className="text-[#FFCBD7] underline">
              Completa tu perfil personal
            </Text>
            <Text className="text-[#FFCBD7] font-bold">60%</Text>
          </View>
        </View>
      </View>
    </View>
  );
}
